{"remainingRequest":"C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\src\\store\\index.js","mtime":1603335981475},{"path":"C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\1114092177.ICESI\\Desktop\\taller-vue\\taller2\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCBWdWV4IGZyb20gInZ1ZXgiOyAvL2ltcG9ydCBkYiBmcm9tICcuLi9wbHVnaW5zL2ZpcmViYXNlJwoKaW1wb3J0IGZpcmViYXNlIGZyb20gIi4uL3BsdWdpbnMvZmlyZWJhc2UiOwp2YXIgZkRlcGFydG1lbnQgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCJkZXBhcnRtZW50cyIpOwp2YXIgZlVzZXJzID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigidXNlcnMiKTsKVnVlLnVzZShWdWV4KTsKdmFyIHN0YXRlID0gewogIGRlcGFydG1lbnRzOiB7fSwKICB1c2Vyczoge30sCiAgYXV0aFVzZXI6IHVuZGVmaW5lZAp9Owp2YXIgZ2V0dGVycyA9IHsKICBkZXBhcnRtZW50czogZnVuY3Rpb24gZGVwYXJ0bWVudHMoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5kZXBhcnRtZW50czsKICB9LAogIHVzZXJzOiBmdW5jdGlvbiB1c2VycyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLnVzZXJzOwogIH0sCiAgYXV0aFVzZXI6IGZ1bmN0aW9uIGF1dGhVc2VyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYXV0aFVzZXI7CiAgfQp9OyAvLyBhY3Rpb25zCgp2YXIgYWN0aW9ucyA9IHsKICBsb2FkOiBmdW5jdGlvbiBsb2FkKF9yZWYpIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIGZEZXBhcnRtZW50Lm9uU25hcHNob3QoZnVuY3Rpb24gKHF1ZXJ5KSB7CiAgICAgIHZhciBkZXBhcnRtZW50cyA9IHt9OwogICAgICBxdWVyeS5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICB2YXIgZGVwID0gZG9jLmRhdGEoKTsKICAgICAgICBkZXAuaWQgPSBkb2MuaWQ7CiAgICAgICAgZGVwYXJ0bWVudHNbZGVwLmlkXSA9IGRlcDsKICAgICAgfSk7CiAgICAgIGNvbW1pdCgiU0VUX0RFUEFSVE1FTlRTIiwgZGVwYXJ0bWVudHMpOwogICAgfSk7CiAgICBmVXNlcnMub25TbmFwc2hvdChmdW5jdGlvbiAocXVlcnkpIHsKICAgICAgdmFyIHVzZXJzID0ge307CiAgICAgIHF1ZXJ5LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgIHZhciB1c3IgPSBkb2MuZGF0YSgpOwogICAgICAgIHVzci5pZCA9IGRvYy5pZDsKICAgICAgICB1c2Vyc1t1c3IuaWRdID0gdXNyOwogICAgICB9KTsKICAgICAgY29tbWl0KCJTRVRfVVNFUlMiLCB1c2Vycyk7CiAgICB9KTsKICB9LAogIGNyZWF0ZURlcGFydG1lbnQ6IGZ1bmN0aW9uIGNyZWF0ZURlcGFydG1lbnQoXywgcGF5bG9hZCkgewogICAgcmV0dXJuIGZEZXBhcnRtZW50LmFkZChwYXlsb2FkKTsKICB9LAogIHVwZGF0ZURlcGFydG1lbnQ6IGZ1bmN0aW9uIHVwZGF0ZURlcGFydG1lbnQoXywgX3JlZjIpIHsKICAgIHZhciBpZCA9IF9yZWYyLmlkLAogICAgICAgIHBheWxvYWQgPSBfcmVmMi5wYXlsb2FkOwogICAgcmV0dXJuIGZEZXBhcnRtZW50LmRvYyhpZCkuc2V0KHBheWxvYWQpOwogIH0sCiAgZGVsZXRlRGVwYXJ0bWVudDogZnVuY3Rpb24gZGVsZXRlRGVwYXJ0bWVudChfLCBpZCkgewogICAgcmV0dXJuIGZEZXBhcnRtZW50LmRvYyhpZCkuZGVsZXRlKCk7CiAgfSwKICBjcmVhdGVVc2VyOiBmdW5jdGlvbiBjcmVhdGVVc2VyKGNvbnRleHQsIHBheWxvYWQpIHsKICAgIHJldHVybiBzaGEyNTYocGF5bG9hZC5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICBwYXlsb2FkLnBhc3N3b3JkID0gZTsKICAgICAgcmV0dXJuIGZVc2Vycy5hZGQocGF5bG9hZCkudGhlbihmdW5jdGlvbiAoeCkgewogICAgICAgIGlmIChwYXlsb2FkLmRlcGFydGFtZW50bykgY29udGV4dC5kaXNwYXRjaCgiYWRkVXNlckRlcGFydG1lbnQiLCB7CiAgICAgICAgICBpZFVzZXI6IHguaWQsCiAgICAgICAgICBpZERlcGFydG1lbnQ6IHBheWxvYWQuZGVwYXJ0YW1lbnRvCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICB1cGRhdGVVc2VyOiBmdW5jdGlvbiB1cGRhdGVVc2VyKGNvbnRleHQsIF9yZWYzKSB7CiAgICB2YXIgaWQgPSBfcmVmMy5pZCwKICAgICAgICBwYXlsb2FkID0gX3JlZjMucGF5bG9hZDsKICAgIHJldHVybiBzaGEyNTYocGF5bG9hZC5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICBwYXlsb2FkLnBhc3N3b3JkID0gZTsKICAgICAgdmFyIHVzciA9IGNvbnRleHQuc3RhdGUudXNlcnNbaWRdOwoKICAgICAgaWYgKHVzciAmJiB1c3IuZGVwYXJ0YW1lbnRvICE9IHBheWxvYWQuZGVwYXJ0YW1lbnRvKSB7CiAgICAgICAgY29udGV4dC5kaXNwYXRjaCgicmVtb3ZlVXNlckRlcGFydG1lbnQiLCB7CiAgICAgICAgICBpZFVzZXI6IGlkLAogICAgICAgICAgaWREZXBhcnRtZW50OiB1c3IuZGVwYXJ0YW1lbnRvCiAgICAgICAgfSk7CiAgICAgICAgY29udGV4dC5kaXNwYXRjaCgiYWRkVXNlckRlcGFydG1lbnQiLCB7CiAgICAgICAgICBpZFVzZXI6IGlkLAogICAgICAgICAgaWREZXBhcnRtZW50OiBwYXlsb2FkLmRlcGFydGFtZW50bwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gZlVzZXJzLmRvYyhpZCkuc2V0KHBheWxvYWQpOwogICAgfSk7CiAgfSwKICBkZWxldGVVc2VyOiBmdW5jdGlvbiBkZWxldGVVc2VyKF8sIGlkKSB7CiAgICByZXR1cm4gZlVzZXJzLmRvYyhpZCkuZGVsZXRlKCk7CiAgfSwKICBhZGRVc2VyRGVwYXJ0bWVudDogZnVuY3Rpb24gYWRkVXNlckRlcGFydG1lbnQoY29udGV4dCwgX3JlZjQpIHsKICAgIHZhciBpZFVzZXIgPSBfcmVmNC5pZFVzZXIsCiAgICAgICAgaWREZXBhcnRtZW50ID0gX3JlZjQuaWREZXBhcnRtZW50OwogICAgdmFyIGRlcCA9IGNvbnRleHQuc3RhdGUuZGVwYXJ0bWVudHNbaWREZXBhcnRtZW50XTsKCiAgICBpZiAoZGVwKSB7CiAgICAgIGlmICghZGVwLnVzZXJzKSBkZXAudXNlcnMgPSB7fTsKICAgICAgZGVwLnVzZXJzW2lkVXNlcl0gPSBpZFVzZXI7CiAgICAgIGNvbnRleHQuZGlzcGF0Y2goInVwZGF0ZURlcGFydG1lbnQiLCB7CiAgICAgICAgaWQ6IGlkRGVwYXJ0bWVudCwKICAgICAgICBwYXlsb2FkOiBkZXAKICAgICAgfSk7CiAgICB9CiAgfSwKICByZW1vdmVVc2VyRGVwYXJ0bWVudDogZnVuY3Rpb24gcmVtb3ZlVXNlckRlcGFydG1lbnQoY29udGV4dCwgX3JlZjUpIHsKICAgIHZhciBpZFVzZXIgPSBfcmVmNS5pZFVzZXIsCiAgICAgICAgaWREZXBhcnRtZW50ID0gX3JlZjUuaWREZXBhcnRtZW50OwogICAgdmFyIGRlcCA9IGNvbnRleHQuc3RhdGUuZGVwYXJ0bWVudHNbaWREZXBhcnRtZW50XTsKCiAgICBpZiAoZGVwKSB7CiAgICAgIGlmICghZGVwLnVzZXJzKSBkZXAudXNlcnMgPSB7fTsKICAgICAgZGVsZXRlIGRlcC51c2Vyc1tpZFVzZXJdOwogICAgICBjb250ZXh0LmRpc3BhdGNoKCJ1cGRhdGVEZXBhcnRtZW50IiwgewogICAgICAgIGlkOiBpZERlcGFydG1lbnQsCiAgICAgICAgcGF5bG9hZDogZGVwCiAgICAgIH0pOwogICAgfQogIH0sCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWY2LCBfcmVmNykgewogICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdDsKICAgIHZhciBlbWFpbCA9IF9yZWY3LmVtYWlsLAogICAgICAgIHBhc3N3b3JkID0gX3JlZjcucGFzc3dvcmQ7CiAgICBjb25zb2xlLmxvZygiY29tbWl0OiAiLCBjb21taXQpOwogICAgcmV0dXJuIHNoYTI1NihwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocGFzcykgewogICAgICByZXR1cm4gZlVzZXJzLndoZXJlKCJlbWFpbCIsICI9PSIsIGVtYWlsKS53aGVyZSgicGFzc3dvcmQiLCAiPT0iLCBwYXNzKS5nZXQoKS50aGVuKGZ1bmN0aW9uIChxdWVyeVNuYXBzaG90KSB7CiAgICAgICAgaWYgKHF1ZXJ5U25hcHNob3Quc2l6ZSA+IDApIHsKICAgICAgICAgIHZhciB1c2VyRGF0YSA9IHVuZGVmaW5lZDsKICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgIHVzZXJEYXRhID0gZG9jLmRhdGEoKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmICh1c2VyRGF0YSkgewogICAgICAgICAgICBkZWxldGUgdXNlckRhdGEucGFzc3dvcmQ7CiAgICAgICAgICAgIGNvbW1pdCgiU0VUX0FVVEhfVVNFUl9EQVRBIiwgdXNlckRhdGEpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIGdldHRpbmcgZG9jdW1lbnRzOiAiLCBlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmOCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKICAgIGNvbW1pdCgiQ0xFQVJfQVVUSF9VU0VSX0RBVEEiKTsKICB9Cn07IC8vIG11dGF0aW9ucwoKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfREVQQVJUTUVOVFM6IGZ1bmN0aW9uIFNFVF9ERVBBUlRNRU5UUyhzdGF0ZSwgcGF5bG9hZCkgewogICAgc3RhdGUuZGVwYXJ0bWVudHMgPSBwYXlsb2FkOwogIH0sCiAgU0VUX1VTRVJTOiBmdW5jdGlvbiBTRVRfVVNFUlMoc3RhdGUsIHBheWxvYWQpIHsKICAgIHN0YXRlLnVzZXJzID0gcGF5bG9hZDsKICB9LAogIFNFVF9BVVRIX1VTRVJfREFUQTogZnVuY3Rpb24gU0VUX0FVVEhfVVNFUl9EQVRBKHN0YXRlKSB7CiAgICB2YXIgdXNlckRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHVuZGVmaW5lZDsKCiAgICBpZiAodXNlckRhdGEgPT09IHVuZGVmaW5lZCkgewogICAgICB2YXIgdURhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpOwogICAgICBpZiAoISF1RGF0YSAmJiAhIXVEYXRhLmlkKSB1c2VyRGF0YSA9IHVEYXRhOwogICAgfQoKICAgIGlmICh1c2VyRGF0YSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHN0YXRlLmF1dGhVc2VyID0gdXNlckRhdGE7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgSlNPTi5zdHJpbmdpZnkodXNlckRhdGEpKTsKICAgIH0KICB9LAogIENMRUFSX0FVVEhfVVNFUl9EQVRBOiBmdW5jdGlvbiBDTEVBUl9BVVRIX1VTRVJfREFUQSgpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VyIik7CiAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IG5ldyBWdWV4LlN0b3JlKHsKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zCn0pOwoKZnVuY3Rpb24gc2hhMjU2KHN0cikgewogIC8vIFdlIHRyYW5zZm9ybSB0aGUgc3RyaW5nIGludG8gYW4gYXJyYXlidWZmZXIuCiAgdmFyIGJ1ZmZlciA9IG5ldyBUZXh0RW5jb2RlcigidXRmLTgiKS5lbmNvZGUoc3RyKTsKICByZXR1cm4gY3J5cHRvLnN1YnRsZS5kaWdlc3QoIlNIQS0yNTYiLCBidWZmZXIpLnRoZW4oZnVuY3Rpb24gKGhhc2gpIHsKICAgIHJldHVybiBoZXgoaGFzaCk7CiAgfSk7Cn0KCmZ1bmN0aW9uIGhleChidWZmZXIpIHsKICB2YXIgaGV4Q29kZXMgPSBbXTsKICB2YXIgdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpOwoKICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcuYnl0ZUxlbmd0aDsgaSArPSA0KSB7CiAgICAvLyBVc2luZyBnZXRVaW50MzIgcmVkdWNlcyB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgbmVlZGVkICh3ZSBwcm9jZXNzIDQgYnl0ZXMgZWFjaCB0aW1lKQogICAgdmFyIHZhbHVlID0gdmlldy5nZXRVaW50MzIoaSk7IC8vIHRvU3RyaW5nKDE2KSB3aWxsIGdpdmUgdGhlIGhleCByZXByZXNlbnRhdGlvbiBvZiB0aGUgbnVtYmVyIHdpdGhvdXQgcGFkZGluZwoKICAgIHZhciBzdHJpbmdWYWx1ZSA9IHZhbHVlLnRvU3RyaW5nKDE2KTsgLy8gV2UgdXNlIGNvbmNhdGVuYXRpb24gYW5kIHNsaWNlIGZvciBwYWRkaW5nCgogICAgdmFyIHBhZGRpbmcgPSAiMDAwMDAwMDAiOwogICAgdmFyIHBhZGRlZFZhbHVlID0gKHBhZGRpbmcgKyBzdHJpbmdWYWx1ZSkuc2xpY2UoLXBhZGRpbmcubGVuZ3RoKTsKICAgIGhleENvZGVzLnB1c2gocGFkZGVkVmFsdWUpOwogIH0gLy8gSm9pbiBhbGwgdGhlIGhleCBzdHJpbmdzIGludG8gb25lCgoKICByZXR1cm4gaGV4Q29kZXMuam9pbigiIik7Cn0="},{"version":3,"sources":["C:/Users/1114092177.ICESI/Desktop/taller-vue/taller2/src/store/index.js"],"names":["Vue","Vuex","firebase","fDepartment","firestore","collection","fUsers","use","state","departments","users","authUser","undefined","getters","actions","load","commit","onSnapshot","query","forEach","doc","dep","data","id","usr","createDepartment","_","payload","add","updateDepartment","set","deleteDepartment","delete","createUser","context","sha256","password","then","e","x","departamento","dispatch","idUser","idDepartment","updateUser","deleteUser","addUserDepartment","removeUserDepartment","login","email","console","log","pass","where","get","querySnapshot","size","userData","catch","error","logout","mutations","SET_DEPARTMENTS","SET_USERS","SET_AUTH_USER_DATA","uData","JSON","parse","localStorage","getItem","setItem","stringify","CLEAR_AUTH_USER_DATA","removeItem","location","reload","Store","str","buffer","TextEncoder","encode","crypto","subtle","digest","hash","hex","hexCodes","view","DataView","i","byteLength","value","getUint32","stringValue","toString","padding","paddedValue","slice","length","push","join"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport Vuex from \"vuex\";\r\n\r\n//import db from '../plugins/firebase'\r\nimport firebase from \"../plugins/firebase\";\r\n\r\nlet fDepartment = firebase.firestore().collection(\"departments\");\r\nlet fUsers = firebase.firestore().collection(\"users\");\r\n\r\nVue.use(Vuex);\r\n\r\nconst state = {\r\n  departments: {},\r\n  users: {},\r\n  authUser: undefined,\r\n};\r\nconst getters = {\r\n  departments: (state) => state.departments,\r\n  users: (state) => state.users,\r\n  authUser: (state) => state.authUser,\r\n};\r\n// actions\r\nconst actions = {\r\n  load: function({ commit }) {\r\n    fDepartment.onSnapshot((query) => {\r\n      var departments = {};\r\n      query.forEach((doc) => {\r\n        var dep = doc.data();\r\n        dep.id = doc.id;\r\n        departments[dep.id] = dep;\r\n      });\r\n      commit(\"SET_DEPARTMENTS\", departments);\r\n    });\r\n\r\n    fUsers.onSnapshot((query) => {\r\n      var users = {};\r\n      query.forEach((doc) => {\r\n        var usr = doc.data();\r\n        usr.id = doc.id;\r\n        users[usr.id] = usr;\r\n      });\r\n      commit(\"SET_USERS\", users);\r\n    });\r\n  },\r\n  createDepartment: function(_, payload) {\r\n    return fDepartment.add(payload);\r\n  },\r\n  updateDepartment: function(_, { id, payload }) {\r\n    return fDepartment.doc(id).set(payload);\r\n  },\r\n  deleteDepartment: function(_, id) {\r\n    return fDepartment.doc(id).delete();\r\n  },\r\n  createUser: function(context, payload) {\r\n    return sha256(payload.password).then((e) => {\r\n      payload.password = e;\r\n      return fUsers.add(payload).then(x => {\r\n        if (payload.departamento) context.dispatch(\"addUserDepartment\", {idUser:x.id, idDepartment:payload.departamento})\r\n      });\r\n    });\r\n  },\r\n  updateUser: function(context, { id, payload }) {\r\n    return sha256(payload.password).then((e) => {\r\n      payload.password = e;\r\n      var usr = context.state.users[id];\r\n      if (usr && usr.departamento != payload.departamento){\r\n        context.dispatch(\"removeUserDepartment\", {idUser:id, idDepartment:usr.departamento});\r\n        context.dispatch(\"addUserDepartment\", {idUser:id, idDepartment:payload.departamento});        \r\n      } \r\n      return fUsers.doc(id).set(payload);\r\n    });\r\n  },\r\n  deleteUser: function(_, id) {\r\n    return fUsers.doc(id).delete();\r\n  },\r\n  addUserDepartment: function( context, {idUser, idDepartment}) {\r\n    var dep = context.state.departments[idDepartment];\r\n    if (dep){\r\n      if (!dep.users) dep.users = {};\r\n      dep.users[idUser] = idUser;\r\n      context.dispatch(\"updateDepartment\", {id:idDepartment, payload:dep})\r\n    }\r\n  },\r\n  removeUserDepartment: function( context, {idUser, idDepartment}) {\r\n    var dep = context.state.departments[idDepartment];\r\n    if (dep){\r\n      if (!dep.users) dep.users = {};\r\n      delete dep.users[idUser]\r\n      context.dispatch(\"updateDepartment\", {id:idDepartment, payload:dep})\r\n    }\r\n  },  \r\n\r\n  login({ commit }, { email, password }) {\r\n    console.log(\"commit: \", commit);\r\n    return sha256(password).then((pass) => {\r\n      return fUsers\r\n        .where(\"email\", \"==\", email)\r\n        .where(\"password\", \"==\", pass)\r\n        .get()\r\n        .then(function(querySnapshot) {\r\n          if (querySnapshot.size > 0) {\r\n            var userData = undefined;\r\n            querySnapshot.forEach(function(doc) {\r\n              userData = doc.data();\r\n            });\r\n            if (userData) {\r\n              delete userData.password;\r\n              commit(\"SET_AUTH_USER_DATA\", userData);\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(\"Error getting documents: \", error);\r\n        });\r\n    });\r\n  },\r\n  logout({ commit }) {\r\n    commit(\"CLEAR_AUTH_USER_DATA\");\r\n  },\r\n};\r\n\r\n// mutations\r\nconst mutations = {\r\n  SET_DEPARTMENTS: (state, payload) => {\r\n    state.departments = payload;\r\n  },\r\n  SET_USERS: (state, payload) => {\r\n    state.users = payload;\r\n  },\r\n\r\n  SET_AUTH_USER_DATA(state, userData = undefined) {\r\n    if (userData === undefined) {\r\n      var uData = JSON.parse(localStorage.getItem(\"user\"));\r\n      if (!!uData && !!uData.id) userData = uData;\r\n    }\r\n    if (userData !== undefined) {\r\n      state.authUser = userData;\r\n      localStorage.setItem(\"user\", JSON.stringify(userData));\r\n    }\r\n  },\r\n  CLEAR_AUTH_USER_DATA() {\r\n    localStorage.removeItem(\"user\");\r\n    location.reload();\r\n  },\r\n};\r\n\r\nexport default new Vuex.Store({\r\n  state,\r\n  mutations,\r\n  getters,\r\n  actions,\r\n});\r\n\r\nfunction sha256(str) {\r\n  // We transform the string into an arraybuffer.\r\n  var buffer = new TextEncoder(\"utf-8\").encode(str);\r\n  return crypto.subtle.digest(\"SHA-256\", buffer).then(function(hash) {\r\n    return hex(hash);\r\n  });\r\n}\r\n\r\nfunction hex(buffer) {\r\n  var hexCodes = [];\r\n  var view = new DataView(buffer);\r\n  for (var i = 0; i < view.byteLength; i += 4) {\r\n    // Using getUint32 reduces the number of iterations needed (we process 4 bytes each time)\r\n    var value = view.getUint32(i);\r\n    // toString(16) will give the hex representation of the number without padding\r\n    var stringValue = value.toString(16);\r\n    // We use concatenation and slice for padding\r\n    var padding = \"00000000\";\r\n    var paddedValue = (padding + stringValue).slice(-padding.length);\r\n    hexCodes.push(paddedValue);\r\n  }\r\n\r\n  // Join all the hex strings into one\r\n  return hexCodes.join(\"\");\r\n}\r\n"]}]}